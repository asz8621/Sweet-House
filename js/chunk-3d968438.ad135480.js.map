{"version":3,"sources":["webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/views/frontend/Search.vue?663e","webpack:///src/views/frontend/Search.vue","webpack:///./src/views/frontend/Search.vue?d9bf","webpack:///./src/views/frontend/Search.vue","webpack:///./node_modules/core-js/modules/es.string.match.js","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["module","exports","Object","is","x","y","render","_vm","this","_h","$createElement","_c","_self","staticClass","searchProducts","length","_v","_s","$route","params","searchName","_l","item","key","id","attrs","imageUrl","title","_f","price","style","btnLoading","on","$event","preventDefault","addCart","_e","staticRenderFns","props","data","created","getProducts","watch","to","name","from","methods","$store","dispatch","$http","get","api","search","$router","push","mapData","httpMethod","qty","quantity","statusBtn","product","cart","then","component","fixRegExpWellKnownSymbolLogic","anObject","toLength","requireObjectCoercible","advanceStringIndex","regExpExec","MATCH","nativeMatch","maybeCallNative","regexp","O","matcher","undefined","call","RegExp","String","res","done","value","rx","S","global","fullUnicode","unicode","lastIndex","result","A","n","matchStr","sameValue","SEARCH","nativeSearch","searcher","previousLastIndex","index","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","match","error"],"mappings":"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","file":"js/chunk-3d968438.ad135480.js","sourcesContent":["// `SameValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-samevalue\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content search-page\"},[_c('div',{staticClass:\"container py-5\"},[_c('div',{staticClass:\"row pb-md-5\"},[(_vm.searchProducts.length > 0)?[_c('div',{staticClass:\"col-12 alert alert-primary\"},[_vm._v(\"搜尋「\"+_vm._s(this.$route.params.searchName)+\"」，總共有 \"+_vm._s(_vm.searchProducts.length)+\" 項搜尋結果\")]),_vm._l((_vm.searchProducts),function(item){return _c('div',{key:item.id,staticClass:\"col-6 col-md-3 mb-3\"},[_c('router-link',{attrs:{\"to\":(\"/product/\" + (item.id))}},[_c('img',{staticClass:\"img-fluid\",attrs:{\"src\":item.imageUrl[0],\"alt\":\"\"}})]),_c('h2',{staticClass:\"title my-3\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"price mb-3 text-right\"},[_vm._v(\"NT$ \"+_vm._s(_vm._f(\"thousands\")(item.price)))]),_c('div',{staticClass:\"single-features-btnw\",style:({'right': _vm.btnLoading === item.id ? '2px' : ''})},[_c('button',{staticClass:\"addcart large-size btn btn-main w-100\",attrs:{\"type\":\"button\",\"disabled\":_vm.btnLoading !== ''},on:{\"click\":function($event){$event.preventDefault();return _vm.addCart(item.id)}}},[_c('span',{staticClass:\"addcart-text1\"},[_vm._v(\"加入購物車\")]),(_vm.btnLoading === item.id)?_c('div',{staticClass:\"spinner-border spinner-border-sm ml-2\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])]):_vm._e()])])],1)})]:[_c('div',{staticClass:\"col-12 alert alert-danger\"},[_c('span',[_vm._v(\"搜尋「\"+_vm._s(this.$route.params.searchName)+\"」，找不到任何東西。\")]),_c('br'),_c('span',[_vm._v(\"請使用其他的關鍵字再試一次，也可以前往 \"),_c('router-link',{attrs:{\"to\":\"/products\"}},[_vm._v(\"所有產品\")]),_vm._v(\" 來查看所有商品。\")],1)])]],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"content search-page\">\n    <div class=\"container py-5\">\n      <div class=\"row pb-md-5\">\n        <template v-if=\"searchProducts.length > 0\">\n          <div class=\"col-12 alert alert-primary\">搜尋「{{this.$route.params.searchName}}」，總共有 {{searchProducts.length}} 項搜尋結果</div>\n          <div class=\"col-6 col-md-3 mb-3\" v-for=\"item in searchProducts\" :key=\"item.id\">\n            <router-link :to=\"`/product/${item.id}`\">\n              <img :src=\"item.imageUrl[0]\" alt=\"\" class=\"img-fluid\">\n            </router-link>\n            <h2 class=\"title my-3\">{{item.title}}</h2>\n            <div class=\"price mb-3 text-right\">NT$ {{ item.price | thousands }}</div>\n            <div class=\"single-features-btnw\" :style=\"{'right': btnLoading === item.id ? '2px' : ''}\">\n              <button type=\"button\" class=\"addcart large-size btn btn-main w-100\" @click.prevent=\"addCart(item.id)\" :disabled=\"btnLoading !== '' \">\n                <span class=\"addcart-text1\">加入購物車</span>\n                <div class=\"spinner-border spinner-border-sm ml-2\" role=\"status\"\n                v-if=\"btnLoading === item.id\">\n                  <span class=\"sr-only\">Loading...</span>\n                </div>\n              </button>\n            </div>\n          </div>\n        </template>\n\n        <template  v-else>\n          <div class=\"col-12 alert alert-danger\">\n            <span>搜尋「{{this.$route.params.searchName}}」，找不到任何東西。</span><br/>\n            <span>請使用其他的關鍵字再試一次，也可以前往 <router-link to=\"/products\">所有產品</router-link> 來查看所有商品。</span>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: ['carts'],\n  data() {\n    return {\n      searchProducts: {},\n      btnLoading: '',\n    };\n  },\n  created() {\n    this.getProducts();\n  },\n  watch: {\n    $route(to, from) {\n      if (to.name === from.name) {\n        this.getProducts();\n      }\n    },\n  },\n  methods: {\n    getProducts() {\n      const { searchName } = this.$route.params;\n      if (!searchName) return; // 沒輸入不動作\n      this.$store.dispatch('updateLoading', true);\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/products`;\n      this.$http.get(api)\n        .then((res) => {\n          this.searchProducts = res.data.data.filter((item) => item.title.match(searchName));\n          console.log(this.searchProducts);\n          this.$store.dispatch('updateLoading', false);\n        })\n        .catch(() => {\n          this.$store.dispatch('updateLoading', false);\n          this.$toast.error('資料讀取異常，請洽客服人員', { icon: 'fas fa-times' });\n        });\n      this.searchName = '';\n      this.search = false;\n      this.$router.push(`/search/q=${searchName}`);\n    },\n    addCart(id, quantity = 1) { // 加入購物車\n      this.btnLoading = id;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping`;\n\n      let httpMethod = 'post';\n      let qty = quantity; // 數量\n      let statusBtn = 'add'; // 預設 add\n      // 如果購物車有一樣的產品做更新\n      const mapData = this.carts.filter((item) => id === item.product.id);\n      if (mapData.length > 0) {\n        httpMethod = 'patch';\n        qty += mapData[0].quantity;\n        statusBtn = 'edit';\n      }\n      const cart = {\n        product: id,\n        quantity: qty,\n      };\n      this.$http[httpMethod](api, cart).then(() => {\n        this.$bus.$emit('getcart', statusBtn);\n        this.btnLoading = '';\n      }).catch((errors) => {\n        this.$toast.error(`${errors.response.data.errors}`, { icon: 'fas fa-times' });\n        this.btnLoading = '';\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=1639b626&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', 1, function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : regexp[MATCH];\n      return matcher !== undefined ? matcher.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@match\n    function (regexp) {\n      var res = maybeCallNative(nativeMatch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = String(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', 1, function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative(nativeSearch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}